# 신라 호텔 뷔페 더 파크뷰에 대한 사람들의 리뷰 분석
---
## 기간
- 2024-06-20 ~ 2024-07-19 (중간 텀 있음)
---
## 프로젝트명: 서울 신라 호텔 더 파크뷰의 네이버 리뷰 분석

## 목적

### 음식점에 대한 리뷰 긍/부정 평가 분석
- 서울 신라호텔 더 파크뷰 리뷰에 대한 사람들의 긍/부정 평가 분석  

### 이유
- 신라 호텔 뷔페로 선정한 이유는 유명한 호텔 뷔페 리뷰를 분석하고 싶었고 신라호텔이 3대 호텔 뷔페에 든다고 하여 선택하게 되었다.  
- 리뷰는 주관적인 부분이 많기 때문에 사람들의 음식점에 대한 리뷰 평가가 더욱 다양해진다.  
- 다양한 리뷰 속 사람들이 내리는 긍/부정 평가에는 어떠한 평가 요소(키워드)가 포함되어 있는지에 대한 데이터 분석이다.  
---
## 계획
### 프로젝트 과정
    1. 데이터 수집  
    2. 데이터 전처리  
    3. 데이터 분석  
    4. 결론 

### 1. 데이터 수집
- 서울 신라호텔 더 파크뷰에 대한 네이버 리뷰를 크롤링  
    - `/Review_Analyzer/Data_Collect/review_crawler.py`: 네이버 크롤링 리뷰 모듈 개발  
    - 네이버 리뷰 url을 넣으면 리뷰 데이터를 수집한다.  

- 리뷰의 개수는 `리뷰 더보기`를 19번 눌러 나오는 리뷰 개수만큼 고정시켰다.  
    - 초기에는 200개로 고정시킬려고 했다 
    - 리뷰의 개수는 시간적 대비 분석을 생각하여 결정하였다.
    - `리뷰 더보기`칸을 누르니 리뷰 200개가 아닌 200에 근접한 개수가 나왔다.  

- 데이터 수집은 네이버 리뷰
    - 네이버 리뷰는 다른 리뷰들과 달리 키워드 리뷰를 하여 사람들에게 다양한 키워드로 리뷰를 쓰도록 유도하였다.
    - 목적이었던 다양한 리뷰 속 사람들이 내리는 긍/부정 평가에 어떤 평가 요소(키워드)가 포함되어 있는지 알 수 있어서 선택했다.

- 추출할 데이터
    - 아이디, 리뷰 텍스트, 방문 날짜, 방문 횟수

![크롤링할 때 화면](https://imgur.com/bvssHlf.jpg)

![크롤링 과정](https://imgur.com/z7FbYhv.jpg)

- 총 200개의 데이터 수집
![](https://imgur.com/rx2oOxM.jpg)

- 막혔던 부분
    - 리뷰 텍스트 길이가 길이 내용이 전부 보이지 않는 경우가 발생
        - 내용 더보기 아이콘이 있을시 클릭하여 리뷰 텍스트가 전부 보이게 만들었다.
    - 한페이지에 보이는 리뷰글의 개수는 10개로 제한
        - 페이지를 내렸을 때, 리뷰 더보기 버튼을 클릭하여 리뷰글의 개수를 늘려야 한다.
    - 리뷰글 개수 200개를 설정했지만, 190개 혹은 210개가 나오는 문제 발생
        - 오류의 원인을 찾지 못해 코드를 실행할 때 200개가 추출된 경우에 저장시켜 진행했다.

---
### 2. 데이터 전처리

#### 1) 데이터 탐색
- `Review_Text`만 데이터 분석에 사용했다.

#### 2) 데이터 전처리
1. 필요 없는 문자 제거  
    - 정규 표현식을 이용하여 문자 제거  
    - 특수문자, 모음, 자음 등  
2. 리뷰 맞춤법 검사  
    - `Pyhanspell` 패키지를 통해 맞춤법 검사  
3. 리뷰 띄어쓰기 교정  
    - `Pykospacing` 패키지를 통해 띄어쓰기 교정  
    - 띄어쓰기 교정 이후 한글자가 많이 보임
    - 띄어쓰기의 정확성이 조금 떨어짐  
4. 리뷰 길이 탐색(이상치 제거)  
    - 리뷰글의 길이 확인은 `describe()`함수를 통해 확인  
    ![](https://imgur.com/TKfVQXQ.jpg)

    - 리뷰글의 길이 분포는 `histogram`과 `Boxplot`으로 확인  
    ![](https://imgur.com/8WZqGgt.jpg)

    ![](https://imgur.com/Z85fn79.jpg)

    - 이상치 확인  
        - IQR방법을 이용하여 이상치를 찾았다.  
            - IQR (Inter-Quartile Range)  
            - IQR = Q3(3사분위수) - Q1(1사분위수)  
            - 제거기준 = (Q3 + IQR * 1.5보다 큰 값) &(Q1 - IQR * 1.5보다 작은 값)  

5. 불용어/신조어 처리
    - 불용어는 리뷰글 분석에 영향을 끼친다고 생각하기에 불용어 처리를 하지 않겠다.  
    - 신조어는 리뷰글에서 많이 보일 수 없기 때문에 신조어 처리를 하지 않도록 하겠다.  
    - 분석을 통해 처리가 필요하다면 전처리 과정으로 돌아와 처리하는 것으로 계획한다.

---
### 3. 데이터 분석

#### 1) 형태소 분석
- 형태소 분석기를 2개 비교하여 사용했다.
- `okt` 형태소 분석기 사용 후기  
    - 명사로 분리하는 기준이 명확하지 않아 명사가 아닌 것도 나오게 된다.
    - 동사/형용사는 같은 뜻을 가졌지만 다른 형태를 가진 중복 처리가 안된다.
- `kiwipiepy` 형태소 분석기 사용 후기
    - 명사로 분리하는 기준이 명확하다.
    - 동사/형용사는 중복처리를 하여 뜻이 하나인 형태만 나와 분류하기 편하다.

1. 명사 분류 및 시각화
- `okt` 명사 클라우드를 보면 한글자와 같은 명사가 아닌 단어도 출력이 된다.
- `kiwipiepy` 명사 클라우드를 보면 `okt`보다는 정확하게 명사만 추출된것으로 보인다.
![](https://imgur.com/rO7qHhJ.jpg)

2. 동사/형용사 분류 및 시각화
- `okt` 동사/형용사 클라우드를 보면 "맛있게","맛있어요"와 같은 뜻이 같지만 다른 형태의 단어들이 같이 추출된다.
- `kiwipiepy` 동사/형용사 클라우드는 "맛있다"로 중복을 합친걸로 보인다. 
![](https://imgur.com/FeuTd5B.jpg)

#### 2) 카테고리별 긍/부정 분류
- 카테고리는 4개로 나누어 분류한다.
- 4개의 카테고리로 나누는 이유
    - 리뷰글에서 사람들에게 제일 많이 언급될 카테고리가 만족도, 맛, 서비스, 가격라고 생각했다.
    - 네이버 리뷰를 보면 키워드별 리뷰글을 볼 수 있게 남겨져 있는데 그 중 리뷰글이 많고 포괄적이게 쓰인 키워드들을 선택하였다.
- "맛" 카테고리는 음식별 긍/부정 평가를 분석하고 싶어 템플릿을 다르게 적용해보았다.
    - 템플릿이 명확하게 되어있지 않아 출력물에 음식이름뿐만 아니라 동사/형용사도 같이 나오게 되었다.
    - 템플릿을 고쳐가며 좀 더 발전시켜야 할 부분이다.
- 시도한 템플릿은 네 종류이다. 

##### 시도 1
- 카테고리 4개로 나누어 분류를 한 시도이다.
- 각 카테고리별로 나누어 긍/부정 분류를 한다.

![](https://imgur.com/QET3h3c.jpg)

##### 시도 2
- `pydantic` 라이브러리를 사용해 템플릿을 좀 더 명확한 제시 방향을 만든다. 
- "맛" 카테고리에 음식에 따라 긍/부정이 나누어질 수 있어 "맛" 카테고리 자체로 긍/부정 판단이 어렵다고 생각했다.
- "맛" 카테고리에 `맛 긍정`과 `맛 부정` 항목에 음식을 넣어 분류를 했다. 

![](https://imgur.com/5ZBnGPe.jpg)

##### 시도 3
- "맛" 카테고리에서 긍/부정에 대한 대상이 없다면 "음식 없음"을 출력하게 했다.  
- "맛" 카테고리에서 맛에 대한 긍/부정 리뷰글이 없다면 "-"을 출력하게 했다.  
- 이것도 위의 시도 2와 마찬가지로 정확하고 완벽하게 분류되어 출력되지 않았다.  

![](https://imgur.com/WKrGb4G.jpg)

##### 시도 4
- 카테고리별로 나누어 긍/부정을 확인하는 방법도 있지만 리뷰글 자체의 긍/부정도 확인할려고 한다.
- 이번엔 카테고리로 안나누고 긍/부정으로 분류하겠다.

![](https://imgur.com/XyvBOrv.jpg)

#### 3) 긍/부정으로 분류된 데이터 시각화 분석
- 시도 1로 긍/부정 분류한 데이터로 분석을 하겠다.

##### 1. 각 카테고리별 긍/부정 개수 확인
- "가격" 카테고리를 제외한 나머지 카테고리에서 긍정 평가가 더 많았다.

![](https://imgur.com/SeKIs8U.jpg)

##### 2. 각 카테고리별 총 긍/부정 개수 막대 그래프 시각화
- 막대그래프를 통해 "만족도"와 "맛" 카테고리에 대한 긍/부정 평가가 "서비스", "가격"에 비해 월등히 많았다는 것을 알 수 있다.

![](https://imgur.com/ZwDlgbJ.jpg)

##### 3. 각 카테고리별 긍/부정 비율 원형 그래프 시각화
- Pie 그래프를 통해 "만족도", "맛", "서비스" 카테고리에선 긍정의 비율이 90%이상 많았다.
- 하지만, "가격" 카테고리에선 부정의 비율이 80& 이상 많았다.

![](https://imgur.com/4s7YhIL.jpg)

##### 4. 카테고리별 긍/부정 리뷰글 명사, 동사/형용사 추출 및 시각화
- 모든 카테고리의 리뷰글을 추출하지 않고 "만족도"와 "가격" 카테고리만 한다.
    - "만족도" 카테고리는 리뷰글 수가 제일 많았고 긍정 리뷰글 수도 제일 많았다.
    - "가격" 카테고리는 리뷰글 수가 적지만 부정 리뷰글 수가 많다.
- "만족도" 카테고리의 긍정 리뷰글과 "가격" 카테고리의 부정 리뷰글만 추출한 이유는 긍정 리뷰글중 제일 돋보이는 것과 부정 리뷰글중 제일 돋보이는 카테고리들이라 생각했다.
- 하지만, "만족도" 카테고리의 부정 리뷰글과 "가격" 카테고리의 긍정 리뷰글도 그 비율은 적지만 적은 만큼 이유가 확실할거라 생각하고 추출했다.

- 만족도 긍/부정 리뷰글 명사, 동사/형용사 워드 클라우드
    - "만족도" 카테고리의 긍정 리뷰글 명사들을 보면 "친절","음식" 키워드가 제일 크다.  
    - 직원의 친절과 음식 맛에 대한 긍정 평가가 이어진 것으로 보임
    - 긍정 리뷰글 동사/형용사들을 보면 "비싸다","맛있다"등의 키워드가 있다.
    - "가격이 비싸다"라는 부정의 평가가 같이 담긴 것으로 보이지만 "맛있다" 표현을 통해 맛에 대한 긍정 평가는 이어졌다.
![](https://imgur.com/JVDy0s1.jpg)

- 가격 긍/부정 리뷰글 명사, 동사/형용사 워드 클라우드
    - "가격" 긍정 리뷰글에는 "음식", "맛있다"와 같은 키워드를 통해 "맛"에 대한 긍정적인 평가는 만족도와 마찬가지로 이어졌다.
    - "가격: 부정 리뷰글에서 눈에 띄는 점은 "가격"과 "비싸다" 키워드를 통해 소비자는 가격에 대한 부정적인 평가가 많았다는 것을 알 수 있다.

![](https://imgur.com/uyQkBkw.jpg)

##### 5. 빈도 높은 명사 3개 긍/부정 분류
- "만족도" 카테고리의 긍정/부정 리뷰글 빈출 많은 명사 3개를 위의 워드 클라우드를 통해 뽑는다.
- 최대한 다른 명사들로 하고 싶어 의미가 비슷한 명사는 하나를 임의로 지정하겠다.
- "가격" 카테고리의 긍정/부정 리뷰글 빈출 많은 명사 3개를 위의 워드 클라우드를 통해 뽑는다.
- '뷔페', '호텔' 등의 식당 이름 혹은 식당을 나타내는 단어는 빼도록 하겠다.

- 만족도 카테고리
    - 만족도 긍정 리뷰글 빈도 높은 명사 3개
    1. 음식  
    2. 친절  
    3. 디저트  
    ![](https://imgur.com/9a95SeL.jpg)
    

    - 만족도 부정 리뷰글 빈도 높은 명사 3개
    1. 음식  
    2. 사람  
    3. 가격  
    ![](https://imgur.com/USfve6E.jpg)



- 가격 가케고리
    - 가격 긍정 리뷰글 빈도 높은 명사 3개
    1. 가격  
    2. 음식  
    3. 생일  
![](https://imgur.com/yvW97bt.jpg)


    - 가격 부정 리뷰글 빈도 높은 명사 3개
    1. 디저트
    2. 가격
    3. 친절
![](https://imgur.com/3MDMupY.jpg)

##### 6. 빈도 높은 명사들의 총 긍/부정 개수
- 고른 명사들의 긍/부정 리뷰글에서의 언급량을 확인한다.
- 음식점 리뷰글 특성상 음식 언급이 제일 많다.
- 음식 이후로 디저트, 친절에 대한 언급이 많다.

- 만족도
![](https://imgur.com/pL9yolM.jpg)


- 가격
![](https://imgur.com/pZhtJJx.jpg)

##### 7. 빈도 높은 명사들의 긍/부정 시각화
- 비율 시각화를 통해 긍/부정 리뷰글에서 명사들이 긍정적인지 부정적인지 확인한다.
- "-"은 비중이 큰 것도 있지만 긍/부정 비율만 비교했을 때 긍/부정 차이가 애매해질 수 있어서 뺐다.
- "만족도" 부정 리뷰글의 가격 긍/부정 비율은 긍정이 없기에 "-"로 대체하였다.
    - 사실상 부정적인 평가만 있다.

- 만족도 긍정 리뷰글
![](https://imgur.com/UX15Jd0.jpg)

- 만족도 부정 리뷰글
![](https://imgur.com/uYKXp98.jpg)


- 가격 긍정 리뷰글
![](https://imgur.com/sRcrHim.jpg)

- 가격 부정 리뷰글
![](https://imgur.com/alICS8V.jpg)

---
### 4. 결론
- 